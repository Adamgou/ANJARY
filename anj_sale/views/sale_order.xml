<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <data>
        <record id="add_unit_price_discounted_inherit_sale_order" model="ir.ui.view">
            <field name="name">sale.order.view.form.inherit</field>
            <field name="model">sale.order</field>
            <field name="inherit_id" ref="sale.view_order_form" />
            <field name="arch" type="xml">
                <field name="partner_id" position="after">
                    <field name="note_client" />
                </field>
                <xpath
                    expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='discount']"
                    position="after">
                    <field name="unit_price_discounted"
                        readonly="0"
                    />
                </xpath>
                <!--<xpath
                expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='price_subtotal']"
                position="attributes">
                    <attribute name="readonly">0</attribute>
                </xpath>-->
                <xpath
                    expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='price_unit']"
                    position="before">
                    <field name="is_jara" invisible="1" />
                </xpath>
                <xpath
                    expr="/form/sheet/notebook/page/field[@name='order_line']/tree/field[@name='price_unit']"
                    position="attributes">
                    <attribute name="attrs">{'readonly': ['|', ('is_jara', '=', True),
                        ('qty_invoiced', '&gt;', 0)]}</attribute>
                    <attribute name="force_save">1</attribute>
                </xpath>
                <xpath expr="//field[@name='payment_term_id']" position="after">
                    <field name="means_of_payment" />
                </xpath>
                <xpath
                        expr="/form/sheet/notebook/page[@name='other_information']"
                        position="after">
                    <page string="Planning de livraison">
                        <field
                                name="picking_ids"
                                mode="tree"
                                readonly="1"
                        >
                            <tree
                                    string="Bon de livraison"
                                    editable="bottom"
                                    no_open="0" create="0" delete="0"
                                    decoration-success="state == 'done'" decoration-info="state not in ('done', 'cancel')"
                            >
                                <field name="priority" optional="show" widget="priority" nolabel="1"/>
                                <field name="scheduled_date_month_year" optional="show" string="PÃ©riode"/>
                                <field name="scheduled_date" optional="show" string="Date" options='{"date_format": "DD MMM YY"}'/>
                                <field name="name" decoration-bf="1"/>
                                <field name="move_line_ids" string="Article" widget="many2many_tags"/>
                                <field name="location_id" options="{'no_create': True}" string="From" groups="stock.group_stock_multi_locations" optional="show"/>
                                <field name="location_dest_id" options="{'no_create': True}" string="To" groups="stock.group_stock_multi_locations" optional="show"/>
                                <field name="partner_id" optional="show"/>
                                <field name="is_signed" string="Signed" optional="hide" groups="stock.group_stock_sign_delivery"/>
                                <field name="user_id" optional="hide" widget="many2one_avatar_user"/>
                                <field name="scheduled_date" optional="show" widget="remaining_days" attrs="{'invisible':[('state', 'in', ('done', 'cancel'))]}"/>
                                <field name="picking_type_code" invisible="1"/>
                                <field name="products_availability_state" invisible="1" options='{"lazy": true}'/>
                                <field name="products_availability" options='{"lazy": true}'
                                       optional="hide"
                                       attrs="{'invisible': ['|', ('picking_type_code', '!=', 'outgoing'), ('state', 'not in', ['confirmed', 'waiting', 'assigned'])]}"
                                       decoration-success="state == 'assigned' or products_availability_state == 'available'"
                                       decoration-warning="state != 'assigned' and products_availability_state in ('expected', 'available')"
                                       decoration-danger="state != 'assigned' and products_availability_state == 'late'"/>
                                <field name="date_deadline" optional="hide" widget="remaining_days" attrs="{'invisible':[('state', 'in', ('done', 'cancel'))]}"/>
                                <field name="date_done" string="Effective Date" optional="hide"/>
                                <field name="origin" optional="show"/>
                                <field name="backorder_id" optional="hide"/>
                                <field name="picking_type_id" optional="hide"/>
                                <field name="company_id" groups="base.group_multi_company" optional="show"/>
                                <field name="state" optional="show" widget="badge" decoration-success="state == 'done'" decoration-info="state not in ('done', 'cancel')" />
                                <field name="activity_exception_decoration" widget="activity_exception"/>
                                <field name="json_popover" nolabel="1" widget="stock_rescheduling_popover" attrs="{'invisible': [('json_popover', '=', False)]}"/>
                            </tree>

                        </field>
                    </page>
                </xpath>

            </field>
        </record>

        <record id="sale.action_quotations_with_onboarding" model="ir.actions.act_window">
            <field name="context">{'search_default_my_quotation': 0}</field>
        </record>
    </data>

</odoo>