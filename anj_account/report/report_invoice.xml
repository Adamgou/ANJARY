<?xml version='1.0' encoding='utf-8'?>
<odoo>
    <data>
        <template id="bordered_address">
            <div
                t-att-style="'padding-top: 150px;' if o.company_id.name.lower() == 'societe immobiliere anjary' else ''">
                <div style="border: 3px solid black; border-radius: 10px; padding: 5px">
                    <div>
                        <span t-esc="o.partner_id.name" />
                    </div>
                    <div>
                        <span t-esc="o.note_client" />
                    </div>
                    <div>
                        <span t-esc="o.partner_id.city" />
                        <span t-esc="o.partner_id.zip" />
                    </div>
                    <div>
                        <span t-esc="o.partner_id.country_id.name" />
                    </div>
                    <div>
                        <span t-esc="o.partner_id.customer_codes" />
                    </div>

                    <div t-if="o.partner_id.vat" class="mt16">
                        <t t-if="o.company_id.account_fiscal_country_id.vat_label"
                            t-esc="o.company_id.account_fiscal_country_id.vat_label"
                            id="inv_tax_id_label" />
                                    <t t-else="">Tax ID</t>: <span
                            t-field="o.partner_id.vat" />
                    </div>
                    <div t-if="o.partner_id.company_type == 'company'">
                        <div
                            t-if="o.partner_id.company_type == 'company' and o.partner_id.nif"> NIF:<span
                                t-esc="o.partner_id.nif" />
                        </div>
                        <div
                            t-if="o.partner_id.company_type == 'company' and o.partner_id.stat">
                            STAT: <span t-esc="o.partner_id.stat" />
                        </div>
                        <div
                            t-if="o.partner_id.company_type == 'company' and o.partner_id.cif"> CIF: <span
                                t-esc="o.partner_id.cif" />
                        </div>
                        <div
                            t-if="o.partner_id.company_type == 'company' and o.partner_id.rcs"> RCS: <span
                                t-esc="o.partner_id.rcs" />
                        </div>
                    </div>
                </div>
            </div>
        </template>

        <template id="report_invoice_inherit" inherit_id="account.report_invoice_document">
            <xpath expr="//t[@t-call='web.external_layout']" position="before">
                <style>
                    table {
                    border: 1px solid black !important;
                    }

                    th,
                    td {
                    border: 1px solid black !important;
                    }

                    .invoice_tbody td {
                    border: 1px solid black !important;
                    }

                    .invoice_tbody th {
                    border: 1px solid black !important;
                    }

                    table table-sm o_main_table {
                    border: 1px solid black !important;
                    }

                    table table-sm o_main_table th {
                    border: 1px solid black !important;
                    }

                    table table-sm o_main_table td {
                    border: 1px solid black !important;
                    }
                </style>
            </xpath>
            <xpath expr="//t[@t-call='web.external_layout']/t[1]" position="before">
                <t t-set="no_header"
                    t-if="o.journal_id.no_header or o.company_id.name.lower() == 'jara trade'">False</t>
            </xpath>
            <xpath expr="//t[@t-call='web.external_layout']/t[1]" position="before">
                <t t-set="no_header" t-if="o.company_id.name.lower() == 'jara trade'">False</t>
            </xpath>
            <xpath expr="//div[hasclass('page')]/h2" position="replace">
                <h2>
                    <t t-if="o.company_id.name.lower().startswith('jara dist')">
                        <span t-if="o.move_type == 'out_invoice' and o.state == 'posted'"></span>
                    </t>
                    <t t-else="">
                        <span t-if="o.move_type == 'out_invoice' and o.state == 'posted'">Facture</span>
                    </t>
                    <span t-if="o.move_type == 'out_invoice' and o.state == 'draft'"></span>
                    <span t-if="o.move_type == 'out_invoice' and o.state == 'cancel'"></span>
                    <span t-if="o.move_type == 'out_refund'">Credit Note</span>
                    <span t-if="o.move_type == 'in_refund'">Vendor Credit Note</span>
                    <span t-if="o.move_type == 'in_invoice'">Vendor Bill</span>
                    <span t-if="o.name != '/'" t-field="o.name" />
                </h2>
            </xpath>
            <xpath expr="//div[hasclass('page')]/h2//span[last()]" position="before">
                <span t-if="not o.company_id.name.lower() == 'societe immobiliere anjary'"> </span>
            </xpath>
            <xpath expr="//div[hasclass('page')]/h2" position="attributes">
                <attribute name="t-att-style"
                    add="(('font-size: 16px; margin-top: 10px; padding: 3px; width: 60%;') if o.company_id.name.lower()=='societe immobiliere anjary' else 'font-size: 16px; padding: 3px; width: 35%;margin-bottom: -7px;margin-top: 50px')" />
            </xpath>
            <xpath expr="//div[@id='informations']" position="replace">
                <t
                    t-if="not((not o.company_id.name.lower().startswith('jara dist')) or (not o.company_id.name.lower() == 'societe immobiliere anjary'))">
                    <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_date"
                        name="invoice_date"> Date de la facturation: <span t-field="o.invoice_date"
                            t-options="{'widget': 'date'}" />
                    </div>
                    <div class="col-auto col-3 mw-100 mb-2" t-if="o.ref" name="reference">
                        <span t-field="o.ref" />
                    </div>
                </t>
                <t t-else="">
                    <t t-if="o.company_id.name.lower() == 'societe immobiliere anjary'">
                        <div id="informations" class="row mt-4 mb-4">
                            <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_date"
                                name="invoice_date">
                                <t t-if="o.move_type == 'out_invoice'">
                                    <strong>Date de facturation:</strong>
                                </t>
                                <t t-elif="o.move_type == 'out_refund'">
                                    <strong>Date de la note de crédit:</strong>
                                </t>
                                <t t-elif="o.move_type == 'out_receipt'">
                                    <strong>Date de réception:</strong>
                                </t>
                                <t t-else="">
                                    <strong>Date:</strong>
                                </t>
                                <p class="m-0" t-field="o.invoice_date" />
                            </div>
                            <div class="col-auto col-3 mw-100 mb-2"
                                t-if="o.invoice_date_due and o.move_type == 'out_invoice' and o.state == 'posted'"
                                name="due_date">
                                <strong>Date d'échéance:</strong>
                                <p class="m-0" t-field="o.invoice_date_due" />
                            </div>
                        </div>
                    </t>
                    <t t-else="">
                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_date"
                            name="invoice_date"
                            style="width: 25%!important;display: inline-block;margin-left: 350px;margin-top: -20px;">
                            <t t-if="o.move_type == 'out_invoice'">
                                <strong style="text-decoration: underline;">Date de facturation:</strong>
                            </t>
                            <t t-elif="o.move_type == 'out_refund'">
                                <strong style="text-decoration: underline;">Date de la note de
                                    crédit:</strong>
                            </t>
                            <t t-elif="o.move_type == 'out_receipt'">
                                <strong style="text-decoration: underline;">Date de réception:</strong>
                            </t>
                            <t t-else="">
                                <strong style="text-decoration: underline;">Date:</strong>
                            </t>
                            <p class="m-0" t-field="o.invoice_date" />
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2"
                            t-if="o.invoice_date_due and o.move_type == 'out_invoice' and o.state == 'posted'"
                            name="due_date"
                            style="width: 25%!important;display: inline-block;margin-left: 0px;margin-top: -20px;">
                            <strong style="text-decoration: underline;">Date d'échéance:</strong>
                            <p class="m-0" t-field="o.invoice_date_due" />
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_origin"
                            name="origin">
                            <p class="m-0" t-field="o.invoice_origin" />
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.ref" name="reference">
                            <strong>Référence:</strong>
                            <p class="m-0" t-field="o.ref" />
                        </div>
                    </t>
                </t>

                <t t-if="o.company_id.name.lower() == 'societe immobiliere anjary'">
                    <br />
                    <t t-if="print_with_payments">
                        <t t-foreach='o.quit_payment_ids' t-as='payment'>
                            <p>
                                <strong>Payé le : </strong><span t-field="payment.date" /> (<span
                                    t-field="payment.ref" />) </p>
                        </t>
                    </t>
                </t>
            </xpath>
            <xpath expr="//div[hasclass('page')]/h2//span[last()]" position="after">
                <span t-if="o.partner_sequence"> - <span t-field="o.partner_sequence" />
                </span>
            </xpath>
            <xpath expr="//div[@name='origin']" position="before">
                <div style="width: 50%;text-align: center;margin-left: 430px;">
                    <span>Antananarivo, le <t t-esc="datetime.datetime.now().strftime('%d-%m-%Y')"></t></span>
                </div>
            </xpath>
            <xpath expr="//div[@name='address_not_same_as_shipping']/t[@t-set='address']"
                position="replace">
                <div class="col-6" name="address_not_same_as_shipping">
                    <t t-set="address">
                        <t t-call="anj_account.bordered_address" />
                    </t>
                </div>
            </xpath>

            <xpath expr="//div[@name='address_same_as_shipping']/t[@t-set='address']"
                position="replace">
                <t t-set="address">
                    <t t-call="anj_account.bordered_address" />
                </t>
            </xpath>
            <xpath expr="//div[@name='no_shipping']/t[@t-set='address']" position="replace">
                <t t-set="address">
                    <t t-call="anj_account.bordered_address" />
                </t>
            </xpath>
            <xpath expr="//p[@name='payment_communication']" position="replace">
                <p t-if="o.move_type in ('out_invoice', 'in_refund') and o.payment_reference"
                    name="payment_communication">
                    <span></span>
                </p>
            </xpath>
            <xpath expr="//p[@name='payment_communication']" position="before">
                <t t-if="o.company_id.name == 'JARA DISTRIBUTION'">
                    <br />
                    <div style="margin-top:10px;margin-bottm:10px"
                        t-attf-class="#{'col-sm-7 col-md-6' if report_type == 'html' else pass} ml-auto">
                        <span>Arrêtée la présente facture au montant de :</span>
                        <span t-esc="o.currency_id.amount_to_text(o.amount_total)" />
                    </div>
                    <div t-if="o.note"> Note:<span t-esc="o.note" />
                    </div>
                    <br />
                </t>
                <t t-if="o.company_id.name == 'JARATRADE'">
                    <br />
                    <div style="margin-top:10px;margin-bottm:10px"
                        t-attf-class="#{'col-sm-7 col-md-6' if report_type == 'html' else pass} ml-auto">
                        <span>Arrêtée la présente facture au montant de :</span>
                        <span t-esc="o.currency_id.amount_to_text(o.amount_total)" />
                    </div>
                    <div t-if="o.partner_id.company_type == 'company' and o.note_client"> Note:<span
                            t-esc="o.note_client" />
                    </div>
                    <br />
                </t>
            </xpath>
            <xpath expr="//div[hasclass('page')]" position="inside">
                <t t-if="o.company_id.name == 'JARA DISTRIBUTION'">
                    <div id="signature" class="row mt32 mb32" style="text-align:center">
                        <div class="col-auto col-3 mw-100 mb-2" name="responsable">
                            <span>Le Responsable</span>
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2" name="chauffeur">
                            <span>Le Chauffeur</span>
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_origin"
                            name="client">
                            <span>Le Client</span>
                        </div>
                    </div>
                </t>
                <t t-if="o.company_id.name == 'JARATRADE'">
                    <div id="signature" class="row mt32 mb32" style="text-align:center">
                        <div class="col-auto col-3 mw-100 mb-2" name="responsable">
                            <span>Le Responsable</span>
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2" name="chauffeur">
                            <span>Le Chauffeur</span>
                        </div>
                        <div class="col-auto col-3 mw-100 mb-2" t-if="o.invoice_origin"
                            name="client">
                            <span>Le Client</span>
                        </div>
                    </div>
                </t>

            </xpath>
            <xpath expr="//div[hasclass('page')]" position="before">
                <style>
                    .hide-important {
                    display:none !important;
                    }
                </style>
                <t t-if="o.company_id.name != 'SOCIETE IMMOBILIERE ANJARY'">
                    <div style="width:100%;">
                        <div t-if="o.company_id.partner_id.nif"> NIF:<span
                                t-esc="o.company_id.partner_id.nif" />
                        </div>
                        <div
                            t-if="(o.company_id.partner_id.company_type == 'company') and o.company_id.partner_id.stat">
                            STAT: <span t-esc="o.company_id.partner_id.stat" />
                        </div>
                        <div
                            t-if="(o.company_id.partner_id.company_type == 'company') and o.company_id.partner_id.cif">
                            CIF: <span t-esc="o.company_id.partner_id.cif" />
                        </div>
                    </div>
                </t>
            </xpath>
            <xpath expr="//th[@name='th_taxes']" position="attributes">
                <attribute name="t-if">o.company_id.name.startswith('jara dist') or
                    o.company_id.name.lower() == 'societe immobiliere anjary'</attribute>
            </xpath>
            <xpath expr="//th[@name='th_priceunit']" position="replace">
                <th style="border: 1px solid black;" name="th_priceunit"
                    t-if="o.company_id.name.startswith('jara dist') or o.company_id.name.lower() == 'societe immobiliere anjary'"
                    t-attf-class="text-end {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                    <span>Prix unitaire</span>
                </th>
                <th style="border: 1px solid black;" t-else="" name="th_priceunit"
                    t-attf-class="text-center {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                    <span>P.U TTC</span>
                </th>
            </xpath>
            <xpath expr="//th[@name='th_discount']" position="replace">
                <th style="border: 1px solid black;text-align: center;" name="th_discount"
                    t-attf-class="text-right {{ 'hide-important d-md-table-cell' if o.company_id.name.lower() == 'societe immobiliere anjary' else '' }}">
                    <span>Remise(%)</span>
                </th>
            </xpath>
            <xpath expr="//td[@t-if='display_discount']" position="replace">
                <td style="border: 1px solid black;"
                    t-attf-class="text-right {{ 'hide-important d-md-table-cell' if o.company_id.name.lower() == 'societe immobiliere anjary' else '' }}">
                    <span class="text-nowrap" t-field="line.discount" />
                </td>
            </xpath>
            <xpath expr="//th[@name='th_discount']" position="after">
                <th style="border: 1px solid black;text-align: center!important;" name="th_pu_net"
                    t-if="not (o.company_id.name.startswith('jara dist') or o.company_id.name.lower() == 'societe immobiliere anjary')"
                    t-attf-class="text-right {{ 'd-none d-md-table-cell' if report_type == 'html' else '' }}">
                    <span>P.U NET</span>
                </th>
            </xpath>

            <xpath expr="//span[@t-field='line.price_unit']" position="replace">
                <t t-if="o.company_id.name.lower() == 'jaratrade'">
                    <span class="text-nowrap" t-field="line.price_unit" />
                </t>
                <t t-elif="o.company_id.name.lower() == 'jara distribution'">
                    <span class="text-nowrap" t-field="line.price_unit" />
                </t>
                <t t-else="">
                    <span class="text-nowrap" t-field="line.price_unit" />
                </t>
            </xpath>
            <xpath expr="//th[@name='th_quantity']" position="replace">
                <th style="border: 1px solid black;" name="th_quantity" class="text-right"
                    t-if="o.company_id.name.startswith('jara dist') or o.company_id.name.lower() == 'societe immobiliere anjary'">
                    <span>Quantité</span>
                </th>
                <th style="border: 1px solid black;" name="th_quantity" class="text-center"
                    t-else="">
                    <span>Qté</span>
                </th>
                <th style="border: 1px solid black;" name="th_unity" class="text-center">
                    <span>Unité</span>
                </th>
            </xpath>
            <xpath expr="//th[@name='th_description']" position="before">
                <th style="border: 1px solid black;" name="th_product_ref" class="text-center"
                    t-if="not (o.company_id.name.startswith('jara dist') or o.company_id.name.lower() == 'societe immobiliere anjary')">
                    Ref</th>
            </xpath>
            <xpath expr="//td[@name='account_invoice_line_name']" position="attributes">
                <attribute name="t-att-style"
                    add="('border: 1px solid black;font-size: 13px;')" />
            </xpath>
            <xpath expr="//t[@name='account_invoice_line_accountable']/td[2]" position="replace">
                <td class="text-right">
                    <span t-field="line.quantity" />
                </td>
                <td class="text-right">
                    <span t-field="line.product_uom_id" groups="uom.group_uom" />
                </td>
            </xpath>
            <xpath expr="//t[@name='account_invoice_line_accountable']/td[2]" position="attributes">
                <attribute name="t-att-style"
                    add="('border: 1px solid black;')" />
            </xpath>
            <xpath expr="//t[@name='account_invoice_line_accountable']/td[3]" position="attributes">
                <attribute name="t-att-style"
                    add="('border: 1px solid black;')" />
            </xpath>
            <xpath expr="//t[@name='account_invoice_line_accountable']/td[4]" position="attributes">
                <attribute name="t-att-style"
                    add="('border: 1px solid black;')" />
            </xpath>
            <xpath expr="//td[@name='account_invoice_line_name']" position="before">
                <td style="border: 1px solid black;font-size: 14px;"
                    t-if="not (o.company_id.name.startswith('jara dist') or o.company_id.name.lower() == 'societe immobiliere anjary')"
                    name="account_invoice_line_ref">
                    <span t-field="line.product_id.default_code" />
                </td>
            </xpath>
            <xpath expr="//th[@name='th_description']" position="replace">
                <th style="border: 1px solid black;" name="th_description" class="text-center">
                    <span
                        t-if="not (o.company_id.name.startswith('jara dist') or o.company_id.name.lower() == 'societe immobiliere anjary')">
                        Désignation</span>
                    <span t-else="">Description</span>
                </th>
            </xpath>
            <xpath expr="//th[@name='th_subtotal']" position="replace">
                <th style="border: 1px solid black;" name="th_subtotal" class="text-right"
                    t-if="o.company_id.name.startswith('jara dist') or o.company_id.name.lower() == 'societe immobiliere anjary'">
                    <span>Prix total</span>
                </th>
                <th style="border: 1px solid black;" name="th_subtotal" class="text-center"
                    t-else="">
                    <span>Montant TTC</span>
                </th>
            </xpath>
            <xpath expr="//t[@name='account_invoice_line_accountable']/td[6]" position="after">
                <t t-if="line.discount == 0">
                    <t t-set="price_unit_ht_disc" t-value="line.product_id.price_unit_ht" />
                </t>
                <t t-else="">
                    <t t-set="price_unit_ht_disc"
                        t-value="line.product_id.price_unit_ht - round((line.product_id.price_unit_ht * line.discount)/100, 2)" />
                </t>


                <td style="text-align: right;border: 1px solid;"
                    t-if="not (o.company_id.name.lower() == 'societe immobiliere anjary')">
                    <t t-if="o.company_id.name.lower() == 'jara distribution'">
                        <t t-esc="line.price_unit - ((line.price_unit * line.discount) / 100)" />
                    </t>
                    <t t-elif="o.company_id.name.lower() == 'jaratrade'">
                        <t t-esc="line.price_unit - ((line.price_unit * line.discount) / 100)" />
                    </t>
                    <t t-else="">
                        <t t-esc="price_unit_ht_disc" />
                    </t>
                </td>
            </xpath>

            <xpath expr="//t[@name='account_invoice_line_accountable']/td[8]" position="attributes">
                <attribute name="t-if">o.company_id.name.startswith('jara dist') or
                    o.company_id.name.lower() == 'societe immobiliere anjary'</attribute>
            </xpath>
            <xpath
                expr="//t[@name='account_invoice_line_accountable']/td[hasclass('o_price_total')]"
                position="replace">
                <td style="border: 1px solid black;" class="text-right o_price_total"
                    t-if="o.company_id.name.startswith('jara dist') or o.company_id.name.lower() == 'societe immobiliere anjary'">
                    <span class="text-nowrap" t-field="line.price_total" />
                </td>
                <td style="border: 1px solid black;" class="text-right o_price_total" t-else="">
                    <t t-if="o.company_id.name.lower() == 'jaratrade'">
                        <span class="text-nowrap" t-field="line.price_total" />
                    </t>
                    <t t-else="">
                        <span class="text-nowrap" t-field="line.price_subtotal" />
                    </t>
                </td>
            </xpath>
            <xpath expr="//div[@id='total']" position="replace">
                <div t-if="o.company_id.name.lower() == 'societe immobiliere anjary'" id="total"
                    lass="clearfix row">
                    <div class="ms-auto">
                        <table class="table table-sm table-borderless avoid-page-break-inside">
                            <t t-set="tax_totals" t-value="o.tax_totals" />
                            <t t-call="account.document_tax_totals" />

                            <t t-if="print_with_payments">
                                <t t-if="o.payment_state != 'invoicing_legacy'">
                                    <t t-set="payments_vals"
                                        t-value="o.sudo()._get_reconciled_payments()" />
                                    <t t-foreach="payments_vals" t-as="payment_vals">
                                        <tr>
                                            <td style="border: 1px solid black;">
                                                <i class="oe_form_field text-right oe_payment_label">Payé
                                                    le <t t-esc="payment_vals['date']"
                                                        t-options='{"widget": "date"}' /></i>
                                            </td>
                                            <td style="border: 1px solid black;" class="text-right">
                                                <span t-esc="payment_vals['amount']"
                                                    t-options='{"widget": "monetary", "display_currency": o.currency_id}' />
                                            </td>
                                        </tr>
                                    </t>
                                    <t t-if="len(payments_vals) > 0">
                                        <tr class="border-black">
                                            <td style="border: 1px solid black;">
                                                <strong>Montant dû</strong>
                                            </td>
                                            <td style="border: 1px solid black;" class="text-right">
                                                <span t-field="o.amount_residual" />
                                            </td>
                                        </tr>
                                    </t>
                                </t>
                            </t>
                        </table>
                    </div>
                </div>

                <div t-else="" id="total" class="row">
                    <div
                        t-attf-class="#{'col-6' if report_type != 'html' else 'col-sm-7 col-md-6'} ml-auto">
                        <table class="table table-sm" style="page-break-inside: avoid;">
                            <t t-set="tax_totals" t-value="o.tax_totals" />

                            <t t-call="account.document_tax_totals"
                                t-if="o.company_id.name.startswith('jara dist')" />
                            <t t-else="">
                                <table class="table table-sm" style="border: 1px solid black;">
                                    <t t-if="o.company_id.name.lower() == 'jaratrade'">
                                        <tr>
                                            <td style="border: 1px solid black;">Total HT</td>
                                            <td
                                                style="border: 1px solid black;background-color: none; text-align: right">
                                                <t t-esc="o.amount_untaxed"
                                                    t-options="{'widget': 'float', 'precision': 2}" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid black;">Total TVA</td>
                                            <td
                                                style="background-color: none; text-align: right; border: 1px solid black;">
                                                <t t-esc="o.amount_total - o.amount_untaxed"
                                                    t-options="{'widget': 'float', 'precision': 2}" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid black;">Total TTC</td>
                                            <td
                                                style="background-color: none;  border: 1px solid black;text-align: right;">
                                                <t t-esc="o.amount_total"
                                                    t-options="{'widget': 'float', 'precision': 2}" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid black;font-weight: bold;">Net
                                                à payer Ar</td>
                                            <td
                                                style="border: 1px solid black;background-color: none; text-align: right;font-weight: bold;">
                                                <t t-esc="o.amount_total"
                                                    t-options="{'widget': 'float', 'precision': 2}" />
                                            </td>
                                        </tr>
                                    </t>
                                    <t t-elif="o.company_id.name.lower() == 'jara distribution'">
                                        <tr>
                                            <td style="border: 1px solid black;font-weight: bold;">Total
                                                TTC Ar</td>
                                            <td
                                                style="background-color: none;  border: 1px solid black;text-align: right;font-weight: bold;">
                                                <t t-esc="o.amount_total"
                                                    t-options="{'widget': 'float', 'precision': 2}" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid black;font-weight: bold;">Net
                                                à payer Ar</td>
                                            <td
                                                style="border: 1px solid black;background-color: none; text-align: right;font-weight: bold;">
                                                <t t-esc="o.amount_total"
                                                    t-options="{'widget': 'float', 'precision': 2}" />
                                            </td>
                                        </tr>
                                    </t>
                                    <t t-else="">
                                        <tr>
                                            <td style="border: 1px solid black;font-weight: bold;">Total
                                                TTC Ar</td>
                                            <td
                                                style="background-color: none;  border: 1px solid black;text-align: right;font-weight: bold;">
                                                <t t-esc="o.amount_total"
                                                    t-options="{'widget': 'float', 'precision': 2}" />
                                            </td>
                                        </tr>
                                        <tr>
                                            <td style="border: 1px solid black;font-weight: bold;">Net
                                                à payer Ar</td>
                                            <td
                                                style="border: 1px solid black;background-color: none; text-align: right;font-weight: bold;">
                                                <t t-esc="o.amount_total"
                                                    t-options="{'widget': 'float', 'precision': 2}" />
                                            </td>
                                        </tr>
                                    </t>
                                </table>
                            </t>

                            <t t-if="print_with_payments">
                                <t t-if="o.payment_state != 'invoicing_legacy'">
                                    <t t-set="payments_vals"
                                        t-value="o.sudo()._get_reconciled_payments()" />
                                    <t t-foreach="payments_vals" t-as="payment_vals">
                                        <tr>
                                            <td>
                                                <i class="oe_form_field text-right oe_payment_label">Payé
                                                    le : <t t-esc="payment_vals['date']"
                                                        t-options='{"widget": "date"}' /></i>
                                            </td>
                                            <td class="text-right">
                                                <span t-esc="payment_vals['amount']"
                                                    t-options='{"widget": "monetary", "display_currency": o.currency_id}' />
                                            </td>
                                        </tr>
                                    </t>
                                    <t t-if="len(payments_vals) > 0">
                                        <tr class="border-black">
                                            <td>
                                                <strong>Montant dû : </strong>
                                            </td>
                                            <td class="text-right">
                                                <span t-field="o.amount_residual" />
                                            </td>
                                        </tr>
                                    </t>
                                </t>
                            </t>
                        </table>
                    </div>
                </div>
            </xpath>
            <xpath expr="//p[@name='payment_communication']" position="before">
                <br />
            </xpath>
        </template>
        <template id="external_layout_standard_inherit" inherit_id="web.external_layout_boxed">
            <xpath expr="//div[@t-att-style='report_header_style']" position="attributes">
                <attribute name="t-if">not no_header</attribute>
            </xpath>
            <xpath expr="//div[@name='company_address']" position="replace">
                <t t-if="not company.name.lower() == 'societe immobiliere anjary'">
                    <div name="company_address" class="float-right mb4">
                        <span t-if="company.company_details" t-field="company.company_details"></span>
                    </div>
                </t>
            </xpath>
            <xpath expr="//div[@class='row mb8']" position="after">

                <div name="company_address" class="mb-4">
                    <t t-if="company.name.lower() == 'societe immobiliere anjary'">
                        <span t-if="company.company_details" style="font-size:5px!important;"
                            t-field="company.company_details"></span>
                    </t>
                </div>
            </xpath>
            <xpath expr="//div[contains(@t-attf-class, 'footer o_boxed_footer')]" position="replace">
                <t t-if="company.name.lower()=='societe immobiliere anjary'">
                    <div t-attf-class="footer o_boxed_footer o_company_#{company.id}_layout">
                        <t t-if="o">
                            <div class="text-center">
                                <div t-if="report_type == 'pdf'"> Page: <span class="page" /> / <span
                                        class="topage" />
                                </div>
                            </div>
                        </t>
                    </div>
                </t>
                <t t-else="">
                    <div t-attf-class="footer o_boxed_footer o_company_#{company.id}_layout">
                        <t t-if="o">
                            <t t-if="o.journal_id.no_footer">
                                <div>

                                </div>
                            </t>
                            <t t-else="">
                                <div class="text-center">
                                    <span t-esc="o.journal_id.no_footer" />
                                    <div t-field="company.report_footer" />
                                    <div t-if="report_type == 'pdf'"> Page: <span class="page" /> / <span
                                            class="topage" />
                                    </div>
                                </div>
                            </t>
                        </t>
                    </div>
                </t>

            </xpath>
        </template>
        <template id="report_payment_receipt_document_inherit"
            inherit_id="account.report_payment_receipt_document">
            <xpath expr="//div[hasclass('page')]" position="attributes">
                <attribute name="t-att-style"
                    add="(('margin-top:100px;') if o.company_id.name.lower()=='societe immobiliere anjary' else '')" />
            </xpath>
        </template>
    </data>
</odoo>