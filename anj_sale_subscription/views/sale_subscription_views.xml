<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="sale_subscription_view_kanban_inherit" model="ir.ui.view">
        <field name="name"></field>
        <field name="model">sale.subscription</field>
        <field name="inherit_id" ref="sale_subscription.sale_subscription_view_kanban"/>
        <field name="arch" type="xml">
            <field name="code" position="after">
                <field name="product_ids" widget="many2many_tags"/>
            </field>
        </field>
    </record>

    <record id="sale_subscription_view_form" model="ir.ui.view">
        <field name="name">anjary.sale.subscription.form.view</field>
        <field name="model">sale.subscription</field>
        <field name="inherit_id" ref="sale_subscription.sale_subscription_view_form"/>
        <field name="arch" type="xml">
            <!-- remove groups attribute value-->
            <xpath expr="//group[@name='main']/group/div/button[@name='generate_recurring_invoice']" position="attributes">
                <attribute name="groups">base.group_user</attribute>
            </xpath>
            <field name="template_id" position="after">
                <field name="can_read_move" invisible="1"/>
                <field name="is_monthly" invisible="1"/>
                <field name="prorata" attrs="{
                    'readonly': [('can_read_move', '=', True),('invoice_count', '&gt;', 0)],
                    'invisible': ['|', ('can_read_move', '=', False), ('is_monthly', '=', False)]
                }"/>
                <field name="augmentation" string="Augmentation" widget="percentage" style="width:40% !important" class="oe_inline"/>
            </field>
        </field>
    </record>

    <record id="sale_subscription_model_sia" model="ir.actions.act_window">
        <field name="name">Modèles abonement SIA</field>
        <field name="res_model">sale.subscription</field>
        <field name="view_mode">kanban,tree,form,pivot,graph,cohort,activity</field>
        <field name="context">{
            "search_default_my_subscriptions":0
            }</field>
        <field name="domain">[('template_id.name', '=', 'Monthly Subscription SIA')]</field>
        <field name="search_view_id" eval='False'/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create a new subscription
            </p><p>
            Create subscriptions to manage recurring invoicing and payments. Subscriptions can
            be time-bounded or not. In case of a limited period, they are flagged as to be renewed
            one month from the end date.
        </p><p>
            Subscriptions can be automatically generated from sales orders in Sales or eCommerce
            apps. To do so, set a subscription template on your subscription products.
        </p>
        </field>
    </record>

    <menuitem action="sale_subscription_model_sia" id="menu_subscription_model" name="Modèles d'abonement SIA" parent="sale_subscription.menu_sale_subscription" groups="anj_sale_subscription.group_see_subscription_model_sia"/>


</odoo>
